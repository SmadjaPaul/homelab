# Homepage Dashboard - https://gethomepage.dev/
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: homepage
  namespace: argocd
  finalizers:
    - resources-finalizer.argocd.argoproj.io
spec:
  project: default
  source:
    repoURL: https://jameswynn.github.io/helm-charts
    chart: homepage
    targetRevision: 2.0.1
    helm:
      valuesObject:
        image:
          repository: ghcr.io/gethomepage/homepage
          tag: latest

        enableRbac: true

        resources:
          requests:
            cpu: 10m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 256Mi

        config:
          # User-facing homepage - NO technical services visible
          bookmarks:
            - Liens Utiles:
                - Status:
                    - abbr: ST
                      href: https://status.smadja.dev
                - Feedback:
                    - abbr: FB
                      href: https://feedback.smadja.dev

          services:
            # Only user-facing services
            - Applications:
                - Connexion:
                    icon: keycloak.svg
                    href: https://auth.smadja.dev
                    description: Se connecter
            - Support:
                - État des services:
                    icon: uptime-kuma.svg
                    href: https://status.smadja.dev
                    description: Vérifier la disponibilité
                - Feedback:
                    icon: mdi-message-text
                    href: https://feedback.smadja.dev
                    description: Signaler un bug ou suggérer

          widgets:
            - resources:
                cpu: true
                memory: true
                disk: /
            - datetime:
                text_size: xl
                format:
                  dateStyle: long
                  timeStyle: short

          settings:
            title: Smadja.dev
            favicon: https://smadja.dev/favicon.ico
            theme: dark
            color: slate
            headerStyle: clean
            layout:
              Applications:
                style: row
                columns: 1
              Support:
                style: row
                columns: 2

  destination:
    server: https://kubernetes.default.svc
    namespace: homepage

  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
